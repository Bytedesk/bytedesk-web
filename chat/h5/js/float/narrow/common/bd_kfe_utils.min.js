"use strict"; var bd_kfe_utils = { switchEmoji: function () { bd_kfe_data.disabled || (bd_kfe_data.show_emoji = !bd_kfe_data.show_emoji) }, switchAgent: function () { bd_kfe_data.showLeaveMessage = !1, $("#byteDesk-main").show(), $("#byteDesk-leave").hide(), $("#byteDesk-rate").hide(), bd_kfe_data.isRobot = !1, bd_kfe_httpapi.requestThread() }, switchLeaveMessage: function () { console.log("switch leave message"), bd_kfe_data.showLeaveMessage = !0, $("#byteDesk-main").hide(), $("#byteDesk-leave").show(), $("#byteDesk-rate").hide() }, hideLeaveMessage: function () { bd_kfe_data.showLeaveMessage = !1, $("#byteDesk-main").show(), $("#byteDesk-leave").hide() }, switchForm: function () { $("#byteDesk-main").hide(), $("#byteDesk-leave").hide(), $("#byteDesk-rate").hide(), $("#byteDesk-form").show() }, showMessage: function () { $("#byteDesk-main").show(), $("#byteDesk-form").hide(), $("#byteDesk-leave").hide(), $("#byteDesk-rate").hide() }, switchRobot: function () { console.log("switch robot"), bd_kfe_data.showLeaveMessage = !1, $("#byteDesk-main").show(), $("#byteDesk-leave").hide(), $("#byteDesk-rate").hide(), bd_kfe_data.isRobot = !0, bd_kfe_httpapi.requestRobot() }, switchEmotion: function () { console.log("switch emotion"), bd_kfe_data.show_emoji = !bd_kfe_data.show_emoji, bd_kfe_data.show_emoji ? ($("#byteDesk-input-emoji-box").show(), console.log("show")) : ($("#byteDesk-input-emoji-box").hide(), console.log("hide")) }, switchRate: function () { console.log("switch rate"), $("#byteDesk-main").hide(), $("#byteDesk-leave").hide(), $("#byteDesk-rate").show() }, hideRate: function () { $("#byteDesk-main").show(), $("#byteDesk-rate").hide() }, showUploadImageDialog: function () { return console.log("show upload dialog"), bd_kfe_data.isRobot ? void alert("自助服务暂不支持图片") : bd_kfe_data.isThreadClosed ? void alert("会话已经结束") : void $("input[id=imagefile]").click() }, showUploadFileDialog: function () { return console.log("show upload dialog"), bd_kfe_data.isRobot ? void alert("自助服务暂不支持图片") : bd_kfe_data.isThreadClosed ? void alert("会话已经结束") : void $("input[id=filefile]").click() }, clearMessages: function () { console.log("clearMessages") }, emotionUrl: function (e) { return bd_kfe_data.emojiBaseUrl + e }, imageClicked: function (e) { bd_kfe_data.currentImageUrl = e, window.open(e) }, fileClicked: function (e) { window.open(e) }, voiceClicked: function (e) { bd_kfe_data.currentVoiceUrl = e, window.open(e) }, is_self: function (e) { return e.user.uid === bd_kfe_data.uid }, is_sending: function (e) { return "sending" === e.status }, is_stored: function (e) { return "stored" === e.status }, is_received: function (e) { return "received" === e.status }, is_error: function (e) { return "error" === e.status }, is_read: function (e) { return "readCount" === e.status }, is_type_text: function (e) { return "text" === e.type || "notification_thread" === e.type || "notification_auto_close" === e.type }, is_type_robot: function (e) { return "robot" === e.type }, is_type_image: function (e) { return "image" === e.type }, is_type_file: function (e) { return "file" === e.type }, is_type_voice: function (e) { return "voice" === e.type }, is_type_questionnaire: function (e) { return "questionnaire" === e.type }, is_type_company: function (e) { return "company" === e.type }, is_type_workGroup: function (e) { return "workGroup" === e.type }, is_type_notification: function (e) { return "notification_preview" !== e.type && "notification_thread" !== e.type && e.type.startsWith("notification") }, replaceFace: function (e) { if (null === e || void 0 === e) return ""; var t = bd_kfe_data.emotionMap, s = /\[[\u4E00-\u9FA5NoOK]+\]/g, a = e.match(s), n = e; if (a) for (var p = 0; p < a.length; p++)n = n.replace(a[p], "<img height='25px' width='25px' style='margin-bottom:4px;' src='" + bd_kfe_data.emotionBaseUrl + t[a[p]] + "'>"); return n }, scrollToBottom: function () { $("#byteDesk-message-ul").animate({ scrollTop: $("#byteDesk-message-ul")[0].scrollHeight }, "slow") }, pushToMessageArray: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], s = !1; if ("sending" === e.status) bd_kfe_data.messages.push(e); else for (var a = bd_kfe_data.messages.length - 1; a >= 0; a--) { var n = bd_kfe_data.messages[a]; n.mid === e.mid && (bd_kfe_data.messages.splice(a, 1), bd_kfe_data.messages.push(e), s = !0) } if (!s) { if (bd_kfe_data.messages.push(e), bd_kfe_utils.is_type_notification(e)) t ? $("#byteDesk-message-ul").prepend("<li><p class='byteDesk-timestamp'><span>" + e.createdAt + "</span><br/><span>" + e.content + "</span></p></li>") : $("#byteDesk-message-ul").append("<li><p class='byteDesk-timestamp'><span>" + e.createdAt + "</span><br/><span>" + e.content + "</span></p></li>"), "notification_auto_close" !== e.type && "notification_agent_close" !== e.type || (t ? $("#byteDesk-message-ul").prepend("<li><p class='byteDesk-timestamp'><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.requestThread()'>联系客服</span></p></li>") : $("#byteDesk-message-ul").append("<li><p class='byteDesk-timestamp'><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.requestThread()'>联系客服</span></p></li>")), "notification_rate_helpless" === e.type && (t ? $("#byteDesk-message-ul").prepend("<li><p class='byteDesk-timestamp'><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.requestAgent()'>人工客服</span></p></li>") : $("#byteDesk-message-ul").append("<li><p class='byteDesk-timestamp'><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.requestAgent()'>人工客服</span></p></li>")); else { var p = "<p class='byteDesk-timestamp'><span>" + e.createdAt + "</span><br/></p>"; if (p += "<img class='byteDesk-avatar' width='30' height='30' src='" + e.user.avatar + "'/>", bd_kfe_utils.is_self(e) || (p += "<div class='byteDesk-nickname'>" + e.user.nickname + "</div>"), bd_kfe_utils.is_type_text(e)) p += "<div class='byteDesk-text' id='content-" + e.mid + "'>" + bd_kfe_utils.replaceFace(e.content) + "</div>", p += "<div class='byteDesk-status' id='status-" + e.mid + "'></div>"; else if (bd_kfe_utils.is_type_image(e)) p += "<div class='byteDesk-text' id='content-" + e.mid + "'><img src='" + e.imageUrl + "' alt='[图片]' class='image' onclick=\"bd_kfe_utils.imageClicked('" + encodeURI(e.imageUrl) + "')\"/></div>"; else if (bd_kfe_utils.is_type_file(e)) p += "<div class='byteDesk-text' id='content-" + e.mid + "'><img src='https://www.bytedesk.com/img/input/file.png' alt='[文件]' style='height:30px;width:30px;' onclick=\"bd_kfe_utils.fileClicked('" + encodeURI(e.fileUrl) + "')\"/><span><a href='" + encodeURI(e.fileUrl) + "' target='_blank'>查看文件</a></span ></div>"; else if (bd_kfe_utils.is_type_voice(e)) p += "<div class='byteDesk-text' id='content-" + e.mid + "'><img src='https://www.bytedesk.com/img/input/voice_received.png' alt='[语音]' style='voice' onclick=\"bd_kfe_utils.voiceClicked('" + e.voiceUrl + "')\"/></div>"; else if (bd_kfe_utils.is_type_robot(e)) { for (var r = "", i = 0; i < e.answers.length; i++) { var o = e.answers[i]; r += "<br/><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.queryAnswer(" + o.aid + ")'>" + o.question + "</span>" } p += "<div class='byteDesk-text'><span>" + e.content + "</span>" + r + "</div>" } else if (bd_kfe_utils.is_type_questionnaire(e)) { for (var f = "", a = 0; a < e.questionnaire.questionnaireItems[0].questionnaireItemItems.length; a++) { var c = e.questionnaire.questionnaireItems[0].questionnaireItemItems[a]; f += "<br/><span style='color: #007bff; cursor: pointer;' onclick='bd_kfe_httpapi.chooseQuestionnaire(" + c.qid + ")'>" + c.content + "</span>" } p += "<div class='byteDesk-text'><span>" + e.questionnaire.questionnaireItems[0].title + "</span>" + f + "</div>" } else if (bd_kfe_utils.is_type_company(e)) { for (var d = "", a = 0; a < e.company.countries.length; a++) { var c = e.company.countries[a]; d += "<br/><span style='color: #007bff; cursor: pointer;' onclick='bd_kfe_httpapi.chooseCountry(" + e.company.cid + ", " + c.cid + ")'>" + c.name + "</span>" } p += "<div class='byteDesk-text'><span>" + e.content + "</span>" + d + "</div>" } else if (bd_kfe_utils.is_type_workGroup(e)) { for (var u = "", a = 0; a < e.workGroups.length; a++) { var c = e.workGroups[a]; u += "<br/><span style='color: #007bff; cursor: pointer;' onclick='bd_kfe_httpapi.chooseWorkGroup(" + c.wid + ',"' + c.nickname + "\")'>" + c.nickname + "</span>" } p += "<div class='byteDesk-text'><span>" + e.content + "</span>" + u + "</div>" } bd_kfe_utils.is_self(e) ? t ? $("#byteDesk-message-ul").prepend("<li><div class='self'>" + p + "</div></li>") : $("#byteDesk-message-ul").append("<li><div class='self'>" + p + "</div></li>") : t ? $("#byteDesk-message-ul").prepend("<li><div class='other' id='other" + e.mid + "'>" + p + "</div></li>") : $("#byteDesk-message-ul").append("<li><div class='other' id='other" + e.mid + "'>" + p + "</div></li>") } bd_kfe_utils.scrollToBottom() } }, pushRightAnswerToMessageArray: function (e) { if ("sending" === e.status) return void bd_kfe_data.messages.push(e); for (var t = !1, s = bd_kfe_data.messages.length - 1; s >= 0; s--) { bd_kfe_data.messages[s].mid === e.mid && (bd_kfe_data.messages.splice(s, 1), bd_kfe_data.messages.push(e), t = !0) } if (!t) { bd_kfe_data.messages.push(e); var a = "<p class='byteDesk-timestamp'><span>" + e.createdAt + "</span><br/></p>"; a += "<img class='byteDesk-avatar' width='30' height='30' src='" + e.user.avatar + "'/>", bd_kfe_utils.is_self(e) || (a += "<div class='byteDesk-nickname'>" + e.user.nickname + "</div>"); for (var n = "", p = 0; p < e.answers.length; p++) { var r = e.answers[p]; n += "<br/><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.queryAnswer(" + r.aid + ")'>" + r.question + "</span>" } var i = "<br/><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.rateAnswer(" + e.answer.aid + "," + e.mid + ",true)'>有帮助</span><span style='color:#007bff; cursor: pointer; margin-left: 5px;' onclick='bd_kfe_httpapi.rateAnswer(" + e.answer.aid + "," + e.mid + ",false)'>无帮助</span>"; a += "<div class='byteDesk-text'><span>" + e.content + "</span>" + n + i + "</div>", $("#byteDesk-message-ul").append("<li><div class='other'>" + a + "</div></li>"), bd_kfe_utils.scrollToBottom() } }, pushNoAnswerToMessageArray: function (e) { if ("sending" === e.status) return void bd_kfe_data.messages.push(e); for (var t = !1, s = bd_kfe_data.messages.length - 1; s >= 0; s--) { bd_kfe_data.messages[s].mid === e.mid && (bd_kfe_data.messages.splice(s, 1), bd_kfe_data.messages.push(e), t = !0) } if (!t) { bd_kfe_data.messages.push(e); var a = "<p class='byteDesk-timestamp'><span>" + e.createdAt + "</span><br/></p>"; a += "<img class='byteDesk-avatar' width='30' height='30' src='" + e.user.avatar + "'/>", bd_kfe_utils.is_self(e) || (a += "<div class='byteDesk-nickname'>" + e.user.nickname + "</div>"); for (var n = "", p = 0; p < e.answers.length; p++) { var r = e.answers[p]; n += "<br/><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.queryAnswer(" + r.aid + ")'>" + r.question + "</span>" } a += "<div class='byteDesk-text'><span>" + e.content + "</span>" + n + "<br/><span style='color:#007bff; cursor: pointer;' onclick='bd_kfe_httpapi.requestAgent()'>人工客服</span></div>", $("#byteDesk-message-ul").append("<li><div class='other'>" + a + "</div></li>"), bd_kfe_utils.scrollToBottom() } }, getUrlParam: function (e) { var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)"), s = window.location.search.substr(1).match(t); return null != s ? decodeURIComponent(s[2]) : null }, pushAnswers: function (e) { for (var t = "", s = 0; s < e.length; s++) { var a = e[s]; t += "<li class='byteDesk-question' onclick='bd_kfe_httpapi.queryAnswer(" + a.aid + ")'>" + a.question + "</li>" } $("#byteDesk-question").append(t) }, updateConnection: function (e) { e ? $("#byteDesk-connected-image").attr("src", "https://bytedesk.oss-cn-shenzhen.aliyuncs.com/util/connected.png") : $("#byteDesk-connected-image").attr("src", "https://bytedesk.oss-cn-shenzhen.aliyuncs.com/util/disconnected.png") }, onKeyUp: function (e) { 13 === (e.keyCode || window.event.keyCode) && bd_kfe_stompapi.sendTextMessage(), bd_kfe_stompapi.onInputChange() }, toggleInputTip: function (e) { e ? $("#byteDesk-message-tip").show() : $("#byteDesk-message-tip").hide() }, rateStarChoose: function (e) { 1 == e ? ("//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png" == $("#ratestar1").attr("src") ? ($("#ratestar2").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png"), $("#ratestar3").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png"), $("#ratestar4").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png"), $("#ratestar5").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png")) : $("#ratestar1").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratescore").text("恶劣"), bd_kfe_data.rateScore = 1) : 2 == e ? ("//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png" == $("#ratestar2").attr("src") ? ($("#ratestar3").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png"), $("#ratestar4").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png"), $("#ratestar5").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png")) : ($("#ratestar1").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar2").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png")), $("#ratescore").text("较差"), bd_kfe_data.rateScore = 2) : 3 == e ? ("//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png" == $("#ratestar3").attr("src") ? ($("#ratestar4").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png"), $("#ratestar5").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png")) : ($("#ratestar2").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar3").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png")), $("#ratescore").text("一般"), bd_kfe_data.rateScore = 3) : 4 == e ? ("//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png" == $("#ratestar4").attr("src") ? $("#ratestar5").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_unselected.png") : ($("#ratestar1").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar2").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar3").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar4").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png")), $("#ratescore").text("较好"), bd_kfe_data.rateScore = 4) : 5 == e && ("//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png" == $("#ratestar5").attr("src") || ($("#ratestar1").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar2").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar3").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar4").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png"), $("#ratestar5").attr("src", "//cdn.bytedesk.com/assets/img/rate/ratestar_selected.png")), $("#ratescore").text("非常满意"), bd_kfe_data.rateScore = 5) }, guid: function () { function e() { return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) } return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() }, currentTimestamp: function () { return moment().format("YYYY-MM-DD HH:mm:ss") }, isMobile: function () { return function () { return navigator.userAgent.match(/Android/i) }() || function () { return navigator.userAgent.match(/BlackBerry/i) }() || function () { return navigator.userAgent.match(/iPhone|iPad|iPod/i) }() || function () { return navigator.userAgent.match(/Opera Mini/i) }() || function () { return navigator.userAgent.match(/IEMobile/i) }() }, emotionClicked: function (e) { console.log("imageclicked:" + e); var t = $("#byteDesk-input-textarea").val(); $("#byteDesk-input-textarea").val(t + e), $("#byteDesk-input-emoji-box").hide(), bd_kfe_data.show_emoji = !1 }, processEmotion: function (e) { var t = { "[微笑]": "appkefu_f001.png", "[撇嘴]": "appkefu_f002.png", "[色]": "appkefu_f003.png", "[发呆]": "appkefu_f004.png", "[得意]": "appkefu_f005.png", "[流泪]": "appkefu_f006.png", "[害羞]": "appkefu_f007.png", "[闭嘴]": "appkefu_f008.png", "[睡]": "appkefu_f009.png", "[大哭]": "appkefu_f010.png", "[尴尬]": "appkefu_f011.png", "[发怒]": "appkefu_f012.png", "[调皮]": "appkefu_f013.png", "[呲牙]": "appkefu_f014.png", "[惊讶]": "appkefu_f015.png", "[难过]": "appkefu_f016.png", "[酷]": "appkefu_f017.png", "[冷汗]": "appkefu_f018.png", "[抓狂]": "appkefu_f019.png", "[吐]": "appkefu_f020.png", "[偷笑]": "appkefu_f021.png", "[愉快]": "appkefu_f022.png", "[白眼]": "appkefu_f023.png", "[傲慢]": "appkefu_f024.png", "[饥饿]": "appkefu_f025.png", "[困]": "appkefu_f026.png", "[惊恐]": "appkefu_f027.png", "[流汗]": "appkefu_f028.png", "[憨笑]": "appkefu_f029.png", "[悠闲]": "appkefu_f030.png", "[奋斗]": "appkefu_f031.png", "[咒骂]": "appkefu_f032.png", "[疑问]": "appkefu_f033.png", "[嘘]": "appkefu_f034.png", "[晕]": "appkefu_f035.png", "[疯了]": "appkefu_f036.png", "[衰]": "appkefu_f037.png", "[骷髅]": "appkefu_f038.png", "[敲打]": "appkefu_f039.png", "[再见]": "appkefu_f040.png", "[擦汗]": "appkefu_f041.png", "[抠鼻]": "appkefu_f042.png", "[鼓掌]": "appkefu_f043.png", "[糗大了]": "appkefu_f044.png", "[坏笑]": "appkefu_f045.png", "[左哼哼]": "appkefu_f046.png", "[右哼哼]": "appkefu_f047.png", "[哈欠]": "appkefu_f048.png", "[鄙视]": "appkefu_f049.png", "[委屈]": "appkefu_f050.png", "[快哭]": "appkefu_f051.png", "[阴险]": "appkefu_f052.png", "[亲亲]": "appkefu_f053.png", "[吓]": "appkefu_f054.png", "[可怜]": "appkefu_f055.png", "[菜刀]": "appkefu_f056.png", "[西瓜]": "appkefu_f057.png", "[啤酒]": "appkefu_f058.png", "[篮球]": "appkefu_f059.png", "[乒乓]": "appkefu_f050.png", "[咖啡]": "appkefu_f061.png", "[饭]": "appkefu_f062.png", "[猪头]": "appkefu_f063.png", "[玫瑰]": "appkefu_f064.png", "[凋谢]": "appkefu_f065.png", "[嘴唇]": "appkefu_f066.png", "[爱心]": "appkefu_f067.png", "[心碎]": "appkefu_f068.png", "[蛋糕]": "appkefu_f069.png", "[闪电]": "appkefu_f070.png", "[炸弹]": "appkefu_f071.png", "[刀]": "appkefu_f072.png", "[足球]": "appkefu_f073.png", "[瓢虫]": "appkefu_f074.png", "[便便]": "appkefu_f075.png", "[月亮]": "appkefu_f076.png", "[太阳]": "appkefu_f077.png", "[礼物]": "appkefu_f078.png", "[拥抱]": "appkefu_f079.png", "[强]": "appkefu_f080.png", "[弱]": "appkefu_f081.png", "[握手]": "appkefu_f082.png", "[胜利]": "appkefu_f083.png", "[抱拳]": "appkefu_f084.png", "[勾引]": "appkefu_f085.png", "[拳头]": "appkefu_f086.png", "[差劲]": "appkefu_f087.png", "[爱你]": "appkefu_f088.png", "[No]": "appkefu_f089.png", "[OK]": "appkefu_f080.png", "[爱情]": "appkefu_f091.png", "[飞吻]": "appkefu_f092.png", "[跳跳]": "appkefu_f093.png", "[发抖]": "appkefu_f094.png", "[怄火]": "appkefu_f095.png", "[转圈]": "appkefu_f096.png", "[磕头]": "appkefu_f097.png", "[回头]": "appkefu_f098.png", "[跳绳]": "appkefu_f099.png", "[投降]": "appkefu_f100.png", "[激动]": "appkefu_f101.png", "[乱舞]": "appkefu_f102.png", "[献吻]": "appkefu_f103.png", "[左太极]": "appkefu_f104.png", "[右太极]": "appkefu_f105.png" }, s = /\[[\u4E00-\u9FA5NoOK]+\]/g, a = e.match(s), n = e; if (a) for (var p = 0; p < a.length; p++)n = n.replace(a[p], "<img height='25px' width='25px' src = '//cdn.bytedesk.com/assets/img/emo/" + t[a[p]] + "'>"); return n }, playAudio: function () { document.getElementById("audioPlay").play() }, uploadImage: function (e) { var t = bd_kfe_utils.guid() + ".png", s = new FormData; s.append("file_name", t), s.append("username", bd_kfe_data.username), s.append("file", e), $.ajax({ url: bd_kfe_data.HTTP_HOST + "/visitor/api/upload/image", contentType: !1, cache: !1, processData: !1, mimeTypes: "multipart/form-data", type: "post", data: s, success: function (e) { console.log("upload response:", e.data); var t = e.data; bd_kfe_stompapi.sendImageMessage(t) }, error: function (e) { console.log(e) } }) }, imgReader: function (e) { var t = e.getAsFile(); bd_kfe_utils.uploadImage(t) }, str2bytes: function (e) { for (var t = [], s = 0, a = e.length; s < a; ++s) { var n = e.charCodeAt(s), p = 255 & n; t.push(p) } return t } };