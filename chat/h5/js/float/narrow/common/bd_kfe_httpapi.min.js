var bd_kfe_httpapi = { requestUsername: function () { bd_kfe_data.username = localStorage.bd_kfe_username, bd_kfe_data.password = localStorage.bd_kfe_password, bd_kfe_data.username ? (null == bd_kfe_data.password && (bd_kfe_data.password = bd_kfe_data.username), bd_kfe_httpapi.login()) : $.ajax({ url: bd_kfe_data.HTTP_HOST + "/visitor/api/username", contentType: "application/json; charset=utf-8", type: "get", data: { subDomain: bd_kfe_data.subDomain, client: bd_kfe_data.client }, success: function (a) { bd_kfe_data.uid = a.data.uid, bd_kfe_data.username = a.data.username, bd_kfe_data.password = a.data.username, bd_kfe_data.nickname = a.data.nickname, localStorage.bd_kfe_uid = bd_kfe_data.uid, localStorage.bd_kfe_username = bd_kfe_data.username, localStorage.bd_kfe_nickname = bd_kfe_data.nickname, bd_kfe_httpapi.login() }, error: function (a) { console.log(a) } }) }, registerUser: function () { var a = bd_kfe_utils.getUrlParam("username"), b = null == bd_kfe_utils.getUrlParam("nickname") ? a : bd_kfe_utils.getUrlParam("username"); console.log("username self:", a, b), $.ajax({ url: bd_kfe_data.HTTP_HOST + "/visitor/api/register/user", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ username: a, nickname: b, password: a, subDomain: bd_kfe_data.subDomain, client: bd_kfe_data.client }), success: function (a) { bd_kfe_data.uid = a.data.uid, bd_kfe_data.username = a.data.username, bd_kfe_data.password = bd_kfe_data.username, bd_kfe_data.nickname = a.data.nickname, localStorage.bd_kfe_uid = bd_kfe_data.uid, localStorage.bd_kfe_username = bd_kfe_data.username, localStorage.bd_kfe_password = bd_kfe_data.password, bd_kfe_httpapi.login() }, error: function (a) { console.log(a) } }) }, login: function () { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/oauth/token", type: "post", data: { username: bd_kfe_data.username, password: bd_kfe_data.password, grant_type: "password", scope: "all" }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Basic Y2xpZW50OnNlY3JldA==") }, success: function (a) { bd_kfe_data.passport.token = a, bd_kfe_stompapi.byteDeskConnect(), bd_kfe_httpapi.fingerPrint2() }, error: function (a) { console.log(a) } }) }, fingerPrint2: function () { var a = DeviceInfo.getDeviceInfo({ domain: "" }); $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/fingerprint2/browser", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ browserInfo: encodeURI(a.browserInfo), deviceType: encodeURI(a.deviceType), fingerprint: encodeURI(a.fingerprint), language: encodeURI(a.language), os: encodeURI(a.os), osVersion: encodeURI(a.osVersion), client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("fingerprint2: ", a) }, error: function (a) { console.log(a) } }) }, browse: function () { var a = window.location.href; a = a.endsWith("#") ? a.substring(0, a.length - 1) : a, $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/browse/notify", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ client: bd_kfe_data.client, sessionId: bd_kfe_data.sessionId, referrer: encodeURI(document.referrer), url: encodeURI(a), title: encodeURI(document.title) }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function () { }, error: function (a) { console.log(a) } }) }, acceptInviteBrowse: function () { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/browse/invite/accept", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ biid: bd_kfe_data.browseInviteBIid, client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("browse invite accept:", a.data) }, error: function (a) { console.log(a) } }) }, rejectInviteBrowse: function () { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/browse/invite/reject", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ biid: bd_kfe_data.browseInviteBIid, client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("browse invite reject:", a.data) }, error: function (a) { console.log(a) } }) }, requestThread: function () { console.log("start request thread"), $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/thread/request", contentType: "application/json; charset=utf-8", type: "get", data: { wId: bd_kfe_data.workGroupWid, type: bd_kfe_data.type, aId: bd_kfe_data.agentUid, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("message:", a); var b = a.data; 200 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.thread.appointed ? (bd_kfe_data.title = bd_kfe_data.thread.agent.nickname, $("#byteDesk-agent-avatar").attr("src", bd_kfe_data.thread.agent.avatar), $("#byteDesk-agent-nickname").text(bd_kfe_data.thread.agent.nickname), $("#byteDesk-agent-description").text(bd_kfe_data.thread.agent.description)) : (bd_kfe_data.title = bd_kfe_data.thread.workGroup.nickname, $("#byteDesk-agent-avatar").attr("src", b.user.avatar), $("#byteDesk-agent-nickname").text(b.user.nickname), $("#byteDesk-agent-description").text(b.user.description)), bd_kfe_data.isRobot = !1, bd_kfe_data.isThreadClosed = !1) : 201 === a.status_code ? (bd_kfe_data.thread = b.thread, bd_kfe_httpapi.loadHistoryMessages(), bd_kfe_data.thread.appointed ? (bd_kfe_data.title = bd_kfe_data.thread.agent.nickname, $("#byteDesk-agent-avatar").attr("src", bd_kfe_data.thread.agent.avatar), $("#byteDesk-agent-nickname").text(bd_kfe_data.thread.agent.nickname), $("#byteDesk-agent-description").text(bd_kfe_data.thread.agent.description)) : (bd_kfe_data.title = bd_kfe_data.thread.workGroup.nickname, $("#byteDesk-agent-avatar").attr("src", b.user.avatar), $("#byteDesk-agent-nickname").text(b.user.nickname), $("#byteDesk-agent-description").text(b.user.description)), bd_kfe_data.isRobot = !1, bd_kfe_data.isThreadClosed = !1) : 202 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_stompapi.subscribeTopic(bd_kfe_data.threadTopic()), bd_kfe_data.isThreadClosed = !1) : 203 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.title = bd_kfe_data.thread.appointed ? bd_kfe_data.thread.agent.nickname : bd_kfe_data.thread.workGroup.nickname, bd_kfe_data.isRobot = !1, bd_kfe_utils.switchLeaveMessage()) : 204 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.title = bd_kfe_data.thread.appointed ? bd_kfe_data.thread.agent.nickname : bd_kfe_data.thread.workGroup.nickname, bd_kfe_utils.switchLeaveMessage(), $("#bytedesk-leavemsg-tip").text(b.content)) : 205 === a.status_code ? (bd_kfe_data.questionnaireItemItems = b.questionnaire.questionnaireItems[0].questionnaireItemItems, bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread) : 206 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.isRobot = !0, $("#byteDesk-agent-avatar").attr("src", b.user.avatar), $("#byteDesk-agent-nickname").text(b.user.nickname), $("#byteDesk-agent-description").text(b.user.description)) : -1 === a.status_code ? bd_kfe_httpapi.login() : -2 === a.status_code ? alert("siteId或者工作组id错误") : -3 === a.status_code && alert("您已经被禁言"), bd_kfe_utils.scrollToBottom(), null !== bd_kfe_data.thread.tid && void 0 !== bd_kfe_data.thread.tid && "" !== bd_kfe_data.thread.tid && bd_kfe_stompapi.subscribeTopic(bd_kfe_data.threadTopic()) }, error: function (a) { console.log(a) } }) }, requestAgent: function () { console.log("start request agent thread"), $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/thread/request/agent", contentType: "application/json; charset=utf-8", type: "get", data: { wId: bd_kfe_data.workGroupWid, type: bd_kfe_data.type, aId: bd_kfe_data.agentUid, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("message:", a); var b = a.data; 200 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.thread.appointed ? (bd_kfe_data.title = bd_kfe_data.thread.agent.nickname, $("#byteDesk-agent-avatar").attr("src", bd_kfe_data.thread.agent.avatar), $("#byteDesk-agent-nickname").text(bd_kfe_data.thread.agent.nickname), $("#byteDesk-agent-description").text(bd_kfe_data.thread.agent.description)) : (bd_kfe_data.title = bd_kfe_data.thread.workGroup.nickname, $("#byteDesk-agent-avatar").attr("src", b.user.avatar), $("#byteDesk-agent-nickname").text(b.user.nickname), $("#byteDesk-agent-description").text(b.user.description)), bd_kfe_data.isRobot = !1, bd_kfe_data.isThreadClosed = !1) : 201 === a.status_code ? (bd_kfe_data.thread = b.thread, bd_kfe_httpapi.loadHistoryMessages(), bd_kfe_data.thread.appointed ? (bd_kfe_data.title = bd_kfe_data.thread.agent.nickname, $("#byteDesk-agent-avatar").attr("src", bd_kfe_data.thread.agent.avatar), $("#byteDesk-agent-nickname").text(bd_kfe_data.thread.agent.nickname), $("#byteDesk-agent-description").text(bd_kfe_data.thread.agent.description)) : (bd_kfe_data.title = bd_kfe_data.thread.workGroup.nickname, $("#byteDesk-agent-avatar").attr("src", b.user.avatar), $("#byteDesk-agent-nickname").text(b.user.nickname), $("#byteDesk-agent-description").text(b.user.description)), bd_kfe_data.isRobot = !1, bd_kfe_data.isThreadClosed = !1) : 202 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_stompapi.subscribeTopic(bd_kfe_data.threadTopic()), bd_kfe_data.isThreadClosed = !1) : 203 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.title = bd_kfe_data.thread.appointed ? bd_kfe_data.thread.agent.nickname : bd_kfe_data.thread.workGroup.nickname, bd_kfe_data.isRobot = !1, bd_kfe_utils.switchLeaveMessage()) : 204 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.title = bd_kfe_data.thread.appointed ? bd_kfe_data.thread.agent.nickname : bd_kfe_data.thread.workGroup.nickname, bd_kfe_utils.switchLeaveMessage()) : 205 === a.status_code ? (bd_kfe_data.questionnaireItemItems = b.questionnaire.questionnaireItems[0].questionnaireItemItems, bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread) : 206 === a.status_code ? (bd_kfe_utils.pushToMessageArray(b), bd_kfe_data.thread = b.thread, bd_kfe_data.isRobot = !0) : -1 === a.status_code ? bd_kfe_httpapi.login() : -2 === a.status_code ? alert("siteId或者工作组id错误") : -3 === a.status_code && alert("您已经被禁言"), bd_kfe_utils.scrollToBottom(), null !== bd_kfe_data.thread.tid && void 0 !== bd_kfe_data.thread.tid && "" !== bd_kfe_data.thread.tid && bd_kfe_stompapi.subscribeTopic(bd_kfe_data.threadTopic()) }, error: function (a) { console.log(a) } }), bd_kfe_httpapi.fingerPrint2() }, requestRobot: function () { console.log("自助答疑"), bd_kfe_httpapi.initAnswer() }, rate: function () { bd_kfe_data.rateContent = $("#suggestcontent").val(), $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/rate/do", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ tid: bd_kfe_data.thread.tid, score: bd_kfe_data.rateScore, note: bd_kfe_data.rateContent, invite: bd_kfe_data.isInviteRate, client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("rate: ", a.data), bd_kfe_data.isRated = !0, 200 === a.status_code ? ($("#byteDesk-main").show(), $("#byteDesk-rate").hide()) : alert(a.message) }, error: function (a) { console.log(a), alert(a) } }) }, closeWebPage: function () { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/thread/visitor/close", type: "post", contentType: "application/json; charset=utf-8", dataType: "json", data: JSON.stringify({ tid: bd_kfe_data.thread.tid, client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("close thread: ", a.data), navigator.userAgent.indexOf("MSIE") > 0 ? navigator.userAgent.indexOf("MSIE 6.0") > 0 ? (window.opener = null, window.close()) : (window.open("", "_top"), window.top.close()) : navigator.userAgent.indexOf("Firefox") > 0 ? (window.location.href = "about:blank ", window.opener = null, window.open("", "_self", ""), window.close()) : (window.opener = null, window.open("", "_self", ""), window.close()) }, error: function (a) { console.log(a), alert(a) } }) }, loadHistoryMessages: function () { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/messages/user", type: "get", data: { uid: bd_kfe_data.uid, page: bd_kfe_data.page, size: 10, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { var b, c; if (console.log("loadHistoryMessages: ", a.data), 200 === a.status_code) { for (b = 0; b < a.data.content.length; b++)c = a.data.content[b], "notification_form_request" === c.type || "notification_form_result" === c.type || bd_kfe_utils.pushToMessageArray(c, !0); bd_kfe_utils.scrollToBottom() } else alert(a.message) }, error: function (a) { console.log(a) } }) }, initAnswer: function () { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/answer/init", type: "get", data: { uid: bd_kfe_data.adminUid, tid: bd_kfe_data.thread.tid, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { if (console.log("init answer success:", a.data), 200 === a.status_code) { var b = a.data; bd_kfe_utils.pushToMessageArray(b), bd_kfe_utils.scrollToBottom() } else alert(a.message) }, error: function (a) { console.log("query answers error:", a) } }) }, getTopAnswers: function () { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/answer/top", contentType: "application/json; charset=utf-8", type: "get", data: { uid: bd_kfe_data.adminUid, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("fetch answers success:", a.data), 200 === a.status_code ? (bd_kfe_data.answers = a.data, bd_kfe_utils.pushAnswers(bd_kfe_data.answers.content)) : alert(a.message) }, error: function (a) { console.log("fetch answers error:", a) } }) }, queryAnswer: function (a) { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/answer/query", contentType: "application/json; charset=utf-8", type: "get", data: { tid: bd_kfe_data.thread.tid, aid: a, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { var b, c; console.log("query answer success:", a.data), 200 === a.status_code ? (b = a.data.query, c = a.data.reply, bd_kfe_utils.pushToMessageArray(b), bd_kfe_utils.pushRightAnswerToMessageArray(c), bd_kfe_utils.scrollToBottom()) : alert(a.message) }, error: function (a) { console.log("query answers error:", a) } }) }, messageAnswer: function (a) { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/answer/message", contentType: "application/json; charset=utf-8", type: "get", data: { uid: bd_kfe_data.adminUid, tid: bd_kfe_data.thread.tid, content: a, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (b) { var c, d; console.log("message answer success:", b.data), 200 === b.status_code ? (c = b.data.query, d = b.data.reply, bd_kfe_utils.pushToMessageArray(c), -1 !== a.indexOf("人工") ? bd_kfe_httpapi.requestAgent() : bd_kfe_utils.pushRightAnswerToMessageArray(d), bd_kfe_utils.scrollToBottom()) : 201 === b.status_code ? (c = b.data.query, d = b.data.reply, bd_kfe_utils.pushToMessageArray(c), -1 !== a.indexOf("人工") ? bd_kfe_httpapi.requestAgent() : bd_kfe_utils.pushNoAnswerToMessageArray(d), bd_kfe_utils.scrollToBottom()) : alert(b.message) }, error: function (a) { console.log("query answers error:", a) } }) }, rateAnswer: function (a, b, c) { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/answer/rate", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ aid: a + "", mid: b + "", rate: c, client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { if (console.log("success:", a.data), 200 === a.status_code) { var b = a.data; bd_kfe_utils.pushToMessageArray(b) } else alert(a.message) }, error: function (a) { console.log("query answers error:", a) } }) }, sendMobile: function () { var a = $.trim($("#byteDesk-input-mobile").val()); return 11 !== a.length ? (alert("请正确天下手机号"), void 0) : ($.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/crm/collect", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ adminUid: bd_kfe_data.adminUid, visitorUid: bd_kfe_data.uid, threadTid: bd_kfe_data.thread.tid, name: bd_kfe_data.nickname, mobile: a, client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { var b, c; console.log("success:", a.data), 200 === a.status_code ? (b = bd_kfe_utils.guid(), c = { mid: b, type: "notification", content: "呼叫成功，我们会尽快联系您", createdAt: bd_kfe_utils.currentTimestamp(), localId: b, status: "stored", user: { uid: "", username: bd_kfe_data.username, nickname: bd_kfe_data.nickname, avatar: bd_kfe_data.avatar } }, bd_kfe_utils.pushToMessageArray(c)) : alert(a.message) }, error: function (a) { console.log("query answers error:", a) } }), void 0) }, leaveMessage: function () { var a = $("#byteDesk-leavemsg-mobile").val(), b = $("#byteDesk-leavemsg-content").val(); $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/leavemsg/save", contentType: "application/json; charset=utf-8", dataType: "json", type: "post", data: JSON.stringify({ wid: bd_kfe_data.workGroupWid, aid: bd_kfe_data.agentUid, type: bd_kfe_data.type, mobile: a, email: "", content: b, client: bd_kfe_data.client }), beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { console.log("leave message: ", a.data), 200 === a.status_code ? alert("留言成功") : alert(a.message) }, error: function (a) { console.log(a), alert("留言失败") } }) }, chooseQuestionnaire: function (a) { var b, c, d, e; for (console.log("choose questionnaire: " + a), b = [], c = 0; c < bd_kfe_data.questionnaireItemItems.length; c++)if (d = bd_kfe_data.questionnaireItemItems[c], d.qid == a) { console.log("qid:" + d.qid + " == " + a), b = d.workGroups; break } e = { mid: bd_kfe_utils.guid(), type: "workGroup", content: "选择工作组", workGroups: b, createdAt: bd_kfe_utils.currentTimestamp(), status: "stored", user: { uid: "uid", username: "系统用户", nickname: "系统通知", avatar: "https://chainsnow.oss-cn-shenzhen.aliyuncs.com/avatars/admin_default_avatar.png", visitor: !1 } }, bd_kfe_utils.pushToMessageArray(e) }, getWorkGroupStatus: function (a) { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/status/workGroup", contentType: "application/json; charset=utf-8", type: "get", data: { wid: a, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { if (console.log("get workGroup status success:", a.data), 200 === a.status_code) { var b = a.data.status; console.log("status:" + b) } else alert(a.message) }, error: function (a) { console.log("get workGroup status error:", a) } }) }, getUserStatus: function (a) { $.ajax({ url: bd_kfe_data.HTTP_HOST + "/api/status/agent", contentType: "application/json; charset=utf-8", type: "get", data: { uid: a, client: bd_kfe_data.client }, beforeSend: function (a) { a.setRequestHeader("Authorization", "Bearer " + bd_kfe_data.passport.token.access_token) }, success: function (a) { if (console.log("get user status success:", a.data), 200 === a.status_code) { var b = a.data.status; console.log("status:" + b) } else alert(a.message) }, error: function (a) { console.log("get user status error:", a) } }) }, getPrechatSettings: function () { "workGroup" === bd_kfe_data.type && $.ajax({ url: bd_kfe_data.HTTP_HOST + "/visitor/api/prechat/settings", contentType: "application/json; charset=utf-8", type: "get", data: { wid: bd_kfe_data.workGroupWid, client: bd_kfe_data.client }, success: function (a) { console.log("fetch pre setting success:", a.data), a.data.autoPop && document.getElementById("byteDesk-start").click(), a.data.showTopTip && $("#byteDesk-message-ul").prepend("<li><span class='byteDesk-toptip'>" + a.data.topTip + "</span></li>"), a.data.showCollectMobile && $("#byteDesk-message-input").show(), a.data.showForm && ($("#byteDesk-form-name-div").show(), $("#byteDesk-form-mobile-div").show(), bd_kfe_utils.switchForm()), a.data.hideLogo && $("#byteDesk-logo").hide() }, error: function (a) { console.log("fetch pre setting error:", a) } }) } };